<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>甲骨文记忆</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="screen-orientation" content="portrait"><!-- uc强制竖屏 -->
    <meta name="x5-orientation" content="portrait"><!-- QQ强制竖屏 -->
    <meta name="msapplication-tap-highlight" content="no">
    <link rel="stylesheet" href="css/dedault.css">
    <link rel="stylesheet" href="css/index.css">
    <script src="js/flexible.js"></script>
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/delighters.js"></script>
</head>
<body>
    <div class="loading-box">
        <i><img src="./image/loading/back.jpg" alt=""></i>
        <b><img src="./image/loading/loading.gif" alt=""></b>
        <p>loading...</p>
        <p id="loadingNum">0%</p>
        <div id="loadingBtn"><img src="./image/loading/btn.png" alt=""></div>
    </div>
    <script>
        // 随机数
        function random(min, max) {
            return Math.floor(Math.random() * (max - min)) + min;
        }
        $('#loadingNum').html(random(0, 30) + '%');
    </script>
    <div class="box">
        <ul id="box-pics" class="box-pics">
            <li data-delighter class="screen1">
<!--                <b class="screen1-y-max"><img src="./image/icon/y-max.png" alt=""></b>-->
<!--                <b class="screen1-y-mmin"><img src="./image/icon/y-max.png" alt=""></b>-->
                <div class="wenzi">
                    <em><img src="./image/icon/j.png" alt=""></em>
                    <em><img src="./image/icon/g.png" alt=""></em>
                    <em><img src="./image/icon/w.png" alt=""></em>
                    <em><img src="./image/icon/i.png" alt=""></em>
                    <em><img src="./image/icon/y.png" alt=""></em>
                </div>
                <i><img src="./image/back_img/1.jpg" alt=""></i>
            </li>
            <li data-delighter>
                <div class="suipian">
                    <div>
                        <em><img src="./image/icon/i-1.png" alt=""></em>
                        <em><img src="./image/icon/i-2.png" alt=""></em>
                        <em><img src="./image/icon/i-3.png" alt=""></em>
                    </div>
                </div>
                <!--    视频-->
                <div class="video-box"></div>
                <b class="video-play-btn" data-id="video1" data-video="http://stream.nlc.cn/issue/zhuanti/jiaguwen/2019MOOC0051_01.mp4"><img src="./image/icon/y-b.png" alt=""></b>
                <i><img src="./image/back_img/2.jpg" alt=""></i>
            </li>
            <li data-delighter>
                <em class="suipian2"><img src="./image/icon/i-4.png" alt=""></em>
                <i><img src="./image/back_img/3.jpg" alt=""></i>
            </li>
            <li data-delighter>
                <em class="suipian7"><img src="./image/icon/i-6.png" alt=""></em>
                <i><img src="./image/back_img/4.jpg" alt=""></i>
            </li>
            <li data-delighter>
                <em class="suipian3"><img src="./image/icon/i-5.png" alt=""></em>
                <i><img src="./image/back_img/5.jpg" alt=""></i>
            </li>

            <li data-delighter><i><img src="./image/back_img/6.jpg" alt=""></i></li>
            <li data-delighter>
                <i><img src="./image/back_img/7.jpg" alt=""></i>
            </li>
            <li data-delighter><i><img src="./image/back_img/8.jpg" alt=""></i></li>
            <li data-delighter>
                <!--    视频-->
                <div class="video-box"></div>
                <b class="video-play-btn" data-id="video2" data-video="http://stream.nlc.cn/issue/zhuanti/jiaguwen/2016MOOC0116_01.mp4"><img src="./image/icon/y-b.png" alt=""></b>
                <em class="suipian8"><img src="./image/icon/i-10.png" alt=""></em>
                <i><img src="./image/back_img/9.jpg" alt=""></i>
            </li>
            <li data-delighter>
                <em class="suipian5"><img src="./image/icon/i-8.png" alt=""></em>
                <i><img src="./image/back_img/10.jpg" alt=""></i>
            </li>

            <li data-delighter><i><img src="./image/back_img/11.jpg" alt=""></i></li>
            <li data-delighter><i><img src="./image/back_img/12.jpg" alt=""></i></li>
            <li data-delighter>
                <!--    视频-->
                <div class="video-box"></div>
                <b class="video-play-btn" data-id="video3" data-video="http://stream.nlc.cn/issue/zhuanti/jiaguwen/2016MOOC0119_01.mp4"><img src="./image/icon/y-b.png" alt=""></b>
                <em class="suipian9"><img src="./image/icon/i-11.png" alt=""></em>
                <i><img src="./image/back_img/13.jpg" alt=""></i>
            </li>
            <li data-delighter><i><img src="./image/back_img/14.jpg" alt=""></i></li>
            <li data-delighter>
                <em class="suipian13"><img src="./image/icon/i-15.png" alt=""></em>
                <i><img src="./image/back_img/15.jpg" alt=""></i>
            </li>

            <li data-delighter><i><img src="./image/back_img/16.jpg" alt=""></i></li>
            <li data-delighter><i><img src="./image/back_img/17.jpg" alt=""></i></li>
            <li data-delighter>
                <em class="suipian6"><img src="./image/icon/i-9.png" alt=""></em>
                <i><img src="./image/back_img/18.jpg" alt=""></i>
            </li>
            <li data-delighter><i><img src="./image/back_img/19.jpg" alt=""></i></li>
            <li data-delighter>
                <em class="suipian10"><img src="./image/icon/i-12.png" alt=""></em>
                <i><img src="./image/back_img/20.jpg" alt=""></i>
            </li>
            <li data-delighter>
                <em class="suipian11"><img src="./image/icon/i-13.png" alt=""></em>
                <i><img src="./image/back_img/21.jpg" alt=""></i>
            </li>
            <li data-delighter><i><img src="./image/back_img/22.jpg" alt=""></i></li>
            <li data-delighter>
                <!--    视频-->
                <div class="video-box"></div>
                <b class="video-play-btn" data-id="video4" data-video="http://stream.nlc.cn/issue/zhuanti/jiaguwen/2015MOOC0277_01.mp4"><img src="./image/icon/y-b.png" alt=""></b>
                <em class="suipian12"><img src="./image/icon/i-14.png" alt=""></em>
                <i><img src="./image/back_img/23.jpg" alt=""></i>
            </li>
            <li data-delighter><i><img src="./image/back_img/24.jpg" alt=""></i></li>
            <li data-delighter>
                <em class="suipian14"><img src="./image/icon/i-16.png" alt=""></em>
                <i><img src="./image/back_img/25.jpg" alt=""></i>
            </li>

            <li data-delighter>
                <em class="suipian15"><img src="./image/icon/i-17.png" alt=""></em>
                <i><img src="./image/back_img/26.jpg" alt=""></i>
            </li>
            <li data-delighter>
                <em class="suipian4"><img src="./image/icon/i-7.png" alt=""></em>
                <i><img src="./image/back_img/28.jpg" alt=""></i>
            </li>
        </ul>
    </div>
    <!--    音频-->
    <div class="music-box active">
        <img src="./image/icon/m-k.gif" alt="">
        <audio
                id="musicAudio"
                controls="controls"
                autoplay="autoplay"
                loop="loop"
        >
            <source src="./image/audio/music3e.mp3"/>
        </audio>
    </div>
</body>
</html>
<script>
    setTimeout(function () {
        // 随机数
        function random(min, max) {
            return Math.floor(Math.random() * (max - min)) + min;
        }
        $('#loadingNum').html(random(30, 60) + '%');
    },500)
    window.onload = function () {
        var mo=function(e){e.preventDefault();};
        /***滑动限制***/
        function stop(){
            document.body.style.overflow='hidden';
            document.addEventListener("touchmove",mo,{passive:false});//禁止页面滑动
        }
        /***取消滑动限制***/
        function move(){
            document.body.style.overflow='';//出现滚动条
            document.removeEventListener("touchmove",mo,{passive:false});
        }


        // 音频播放
        function musicPlay() {
            document.getElementsByTagName('audio')[0].play();
            document.addEventListener("WeixinJSBridgeReady", function () {
                document.getElementsByTagName('audio')[0].play();
                document.getElementsByTagName('audio')[0].play();
            }, false);
        }

        let state = true;
        $('.music-box').click(function() {
            if(state) {
                document.getElementsByTagName('audio')[0].pause();
                $(this).removeClass('active')
                $(this).children('img').attr('src', './image/icon/m-g.png')
            } else {
                document.getElementsByTagName('audio')[0].play();
                $(this).addClass('active')
                $(this).children('img').attr('src', './image/icon/m-k.gif')
            }
            state = !state
        })

        // 视频播放
        $('.video-play-btn').click(function () {
            var prop = $(this).attr('data-video');
            var id = $(this).attr('data-id');
            var dom = $(this).siblings('.video-box');
            console.log(prop, dom,  id)
            // stop();
            $('.video-box').show();
            $(this).hide();
            setvideo(prop, dom, id);
            document.getElementsByTagName('audio')[0].pause();
            $('.music-box').removeClass('active');
            $('.music-box').children('img').attr('src', './image/icon/m-g.png')
        });
        // $('.video-box').click(function(){
        //     // move();
        //     $('.video-box').hide();
        //     document.getElementById('video').pause()
        //     document.getElementsByTagName('audio')[0].play();
        //     $('.music-box').addClass('active')
        //     $('.music-box').children('img').attr('src', './image/icon/m-k.gif')
        // });
        function setvideo(url, dom, str) {
            var youku = dom;
            var htmlstr = '';
            if(SetSystem() == 'Android') {
                $('.video-box').addClass('active');
                htmlstr ='<video class="active" id="'+ str +'" width="100%" src="'+url+'" poster="img/lunyu.png" preload="auto" x-webkit-airplay="true" webkit-playsinline="true" playsinline="true" x5-playsinline="" x5-video-player-fullscreen="false" controls="controls"></video>'
            } else {
                $('.video-box').removeClass('active');
                htmlstr ='<video id="'+ str +'" width="100%" poster="img/lunyu.png" preload="auto" x-webkit-airplay="true" webkit-playsinline="true" playsinline="true" x5-playsinline="" x5-video-player-fullscreen="false" controls="controls">' +
                    '<source src="'+url+'" type="video/mp4" />'
                '</video>'
            }
            youku.html(htmlstr);
            var videoArr = ['video1', 'video2', 'video3', 'video4'];
            for(var i = 0; i < videoArr.length; i++) {
                if(videoArr[i] != str) {
                    console.log(videoArr[i])
                    if(document.getElementById(videoArr[i])) {
                        document.getElementById(videoArr[i]).pause();
                    }
                }
            }
            document.getElementById(str).play();
            // document.getElementById('video').requestFullscreen();
        };
        function SetSystem() {
            var u = navigator.userAgent, app = navigator.appVersion;
            var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //g
            var isIOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
            if (isAndroid) {
                //这个是安卓操作系统
                return 'Android'
            }
            if (isIOS) {
                //这个是ios操作系统
                return 'Ios'
            }
        }

        //loading
        function fnLoading() {
            var num = Number($('#loadingNum').html().split('%')[0]);
            setTimeout(function () {
                var IntervalName = setInterval(function () {
                    num++;
                    if(num >= 100) {
                        num = 100
                    }
                    $('#loadingNum').html(num + '%');
                    if(num == 100) {
                        setTimeout(function () {
                            clearInterval(IntervalName);
                            $('#loadingBtn').show();
                            setTimeout(function () {
                                $('#loadingBtn').addClass('active');
                            },500)
                            $('#loadingNum').addClass('active');
                        },500)
                    }
                })
            },500)

        }
        // 开屏提示
        setTimeout(function () {
            stop();
            fnLoading();
        },800)

        $('#loadingBtn').click(function () {
            $('.loading-box').addClass('active');
            setTimeout(function () {
                $('.loading-box').hide();
                move();
                musicPlay();
                $('.box').addClass('active')
            },500)
        })
    }
</script>
